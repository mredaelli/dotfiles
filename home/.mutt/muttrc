# Folder hooks
folder-hook 'main' 'source ~/.mutt/mredaelli'
folder-hook 'fast' 'source ~/.mutt/fast'

# Default account
source ~/.mutt/mredaelli

# Macros for switching accounts
macro index <f2> '<sync-mailbox><enter-command>source ~/.mutt/mredaelli<enter><change-folder>!<enter>'
macro index <f3> '<sync-mailbox><enter-command>source ~/.mutt/fast<enter><change-folder>!<enter>'

# color schemes
source ~/.mutt/solarized
#source ~/.mutt/vombatidae

# Mime handling

macro index,pager \cb "<pipe-message> urlscan<Enter>" "call urlscan to extract URLs out of a message"
macro attach,compose \cb "<pipe-entry> urlscan<Enter>" "call urlscan to extract URLs out of a message"

set mailcap_path= ~/.mutt/mailcap

# sidebar
bind index,pager S sidebar-toggle-visible
bind index,pager <Left> sidebar-prev
bind index,pager <Right>  sidebar-next
bind index,pager <Space> sidebar-open
set sidebar_short_path
set sidebar_delim_chars="/"
set sidebar_folder_indent
set sidebar_indent_string=" "
set sidebar_visible
set sidebar_format="%B%?F? [%F]?%* %?N?%N/?%S"


macro index <Down> "<next-line><next-entry>"
bind pager <Down> next-line
macro index <Up> "<previous-line><previous-entry>"
bind pager <Up> previous-line
bind pager n next-undeleted 
bind pager p previous-undeleted
bind pager N next-entry
bind pager P previous-entry
bind index R toggle-new 
bind index <Enter> display-message
bind index <Return> display-message

bind generic,compose,attach,pager,index i noop    
bind generic,compose,attach,pager,index x noop    
#bind index,generic,compose,attach,pager : noop      
#bind index,generic,compose,attach,pager :q exit      

# making q do nothing in index                    
# bind index q noop                                 
# binding ZZ like in vim to quit, only in index   
# bind index ZZ quit                                
#set quit=ask-yes                    


# Pager View Options ---------------------------------
set pager_index_lines = 10 # number of index lines to show
set pager_context = 3      # number of context lines to show
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs

set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"

bind index <Delete> delete-message

bind attach <return> view-mailcap

# Allow Mutt to open a new IMAP connection automatically.
unset imap_passive

alternative_order text/enriched text/plain text/html
# render HTML and some other types as text
auto_view text/html application/text application/pdf

# many companies send very poor text/plain parts, so prefer html to text/plain
alternative_order text/enriched text/html text/plain text


# Index View Options ---------------------------------
set date_format = "%d/%m %H:%M"
set index_format = "[%Z%E] %D %4C %-20.20F  %s"
set sort = threads                         # like gmail
set sort_aux = reverse-last-date-received  # like gmail
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"


set mail_check_stats


# Keep the IMAP connection alive by polling intermittently (time in seconds).
set imap_keepalive = 300

# How often to check for new mail (time in seconds).
set mail_check = 120

set text_flowed

